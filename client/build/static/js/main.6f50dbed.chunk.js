(this["webpackJsonpshopping-cart"]=this["webpackJsonpshopping-cart"]||[]).push([[0],{213:function(e,t,c){"use strict";c.r(t);var a=c(1),n=c.n(a),s=c(77),r=c.n(s),o=c(5),i=c(7),l=(c(88),c(10)),d=c(3),j=Object(a.createContext)(),u=n.a.createContext({products:[],addItem:function(e){}}),b=c(2),m=c(83),h=c(0),p=function(e){var t=e.component,c=Object(m.a)(e,["component"]);return Object(h.jsx)(o.b,Object(b.a)(Object(b.a)({},c),{},{render:function(){return localStorage.getItem("token")?Object(h.jsx)(t,Object(b.a)({},c)):Object(h.jsx)(o.a,{to:"/login"})}}))},O=function(e){var t=Object(a.useContext)(j).cart;return Object(h.jsx)("div",{className:"navigation",children:Object(h.jsx)("nav",{children:Object(h.jsxs)("ul",{className:"navbar-ul",children:[Object(h.jsx)("li",{className:"navbar-li",children:Object(h.jsx)(i.c,{to:"/signup",children:" SignUp "})}),Object(h.jsx)("li",{className:"navbar-li",children:Object(h.jsx)(i.c,{to:"/login",children:"Login"})}),Object(h.jsx)("li",{className:"navbar-li",children:localStorage.getItem("token")&&Object(h.jsxs)(i.c,{to:"/cart",children:["Cart ",Object(h.jsx)("span",{children:t.length})]})}),Object(h.jsx)("li",{className:"navbar-li",children:localStorage.getItem("token")&&Object(h.jsx)(i.c,{to:"/sellers",children:"Sellers"})}),Object(h.jsx)("li",{className:"navbar-li",children:localStorage.getItem("token")&&Object(h.jsx)(i.b,{onClick:e.logout,children:"Logout"})})]})})})},x=c(8),g=c(4),f=g.b().shape({username:g.d().required("Username is required"),password:g.d().required("Password is required")}),v=c(21),w=c.n(v),N={username:"",password:""},S={username:"",password:""};function k(){var e=Object(a.useState)(N),t=Object(d.a)(e,2),c=t[0],n=t[1],s=Object(a.useState)(S),r=Object(d.a)(s,2),i=r[0],l=r[1],j=Object(a.useState)(true),m=Object(d.a)(j,2),p=m[0],O=m[1],v=Object(a.useContext)(u).setIsLoggedIn,k=Object(o.g)().push;Object(a.useEffect)((function(){f.isValid(c).then((function(e){return O(!e)}))}),[c]);var I=function(e){var t=e.target;!function(e,t){g.c(f,e).validate(t).then((function(){l(Object(b.a)(Object(b.a)({},i),{},Object(x.a)({},e,"")))})).catch((function(t){l(Object(b.a)(Object(b.a)({},i),{},Object(x.a)({},e,t.errors[0])))})),n(Object(b.a)(Object(b.a)({},c),{},Object(x.a)({},e,t)))}(t.name,t.value)};return Object(h.jsxs)("div",{className:"home-wrapper",children:[Object(h.jsx)("h1",{children:"Use My Tech Stuff"}),Object(h.jsx)("div",{className:"item-wrapper",children:Object(h.jsxs)("form",{className:"form",onSubmit:function(e){e.preventDefault(),w.a.post("https://usemytechstuff-tt26.herokuapp.com/login","grant_type=password&username=".concat(c.username,"&password=").concat(c.password),{headers:{Authorization:"Basic ".concat(btoa("lambda-client:lambda-secret")),"Content-Type":"application/x-www-form-urlencoded"}}).then((function(e){v(!0),localStorage.setItem("token",e.data.access_token),localStorage.setItem("name",c.username),k("/sellers"),console.log(localStorage.getItem("name")),console.log(localStorage.getItem("token"))})).catch((function(e){return console.log({err:e})}))},children:[Object(h.jsx)("div",{children:Object(h.jsxs)("label",{className:"form-row",children:["Username:",Object(h.jsx)("input",{value:c.username,onChange:I,name:"username",type:"text"}),i.username]})}),Object(h.jsx)("div",{children:Object(h.jsxs)("label",{className:"form-row",children:["Password:",Object(h.jsx)("input",{value:c.password,onChange:I,name:"password",type:"password"}),i.password]})}),Object(h.jsx)("div",{className:"buttons",children:Object(h.jsx)("div",{className:"form-button",children:Object(h.jsx)("button",{id:"submitBtn",disabled:p,children:"Log In"})})})]})})]})}var I=g.b().shape({fname:g.d("First character of first name should begin with a letter").trim().max(50,"Maximum characters allowed are 50").required("First name is required"),lname:g.d().trim().max(50,"First character of last name should begin with a letter").required("Last name is required"),username:g.d().trim().min(8,"Invalid! Username must be at least 8 characters").max(18,"Maximum characters allowed are 18").required("Username is required"),email:g.d().email("Invalid email").required("Email is required"),password:g.d().min(8,"Invalid! Password must be at least 8 characters").max(23,"Maximum characters allowed are 23").required("Password is required").matches(/^(?=.*[A-Za-z])(?=.*\d)(?=.*[@$!%*#?&])[A-Za-z\d@$!%*#?&*]{8,23}$/,"Password must contain contain one uppercase, one lowercase, one number and one special character"),userrole:g.d().required("Required")}),C={userrole:{userroleid:0,userroletype:""},username:"",fname:"",lname:"",email:"",password:""},y={userrole:{userroleid:0,userroletype:""},username:"",fname:"",lname:"",email:"",password:""};function P(){var e=Object(a.useState)(C),t=Object(d.a)(e,2),c=t[0],n=t[1],s=Object(a.useState)(y),r=Object(d.a)(s,2),i=r[0],l=r[1],j=Object(a.useState)(true),u=Object(d.a)(j,2),m=u[0],p=u[1],O=Object(o.g)().push;Object(a.useEffect)((function(){I.isValid(c).then((function(e){return console.log(e),p(!e)}))}),[c]);var f,v=function(e){var t=e.target,a=t.name,s=t.value;console.log(e.target.name,e.target.value),function(e,t){g.c(I,e).validate(t).then((function(){l(Object(b.a)(Object(b.a)({},i),{},Object(x.a)({},e,"")))})).catch((function(t){l(Object(b.a)(Object(b.a)({},i),{},Object(x.a)({},e,t.errors[0])))})),n(Object(b.a)(Object(b.a)({},c),{},Object(x.a)({},e,t)))}(a,s)};return"1"===c.userrole?f=Object(b.a)(Object(b.a)({},c),{userrole:{userroleid:1,userroletype:"OWNER"}}):"2"===c.userrole&&(f=Object(b.a)(Object(b.a)({},c),{userrole:{userroleid:2,userroletype:"RENTER"}})),Object(h.jsx)("div",{children:Object(h.jsxs)("form",{className:"form container",onSubmit:function(e){var t;e.preventDefault(),t=f,w.a.post("https://usemytechstuff-tt26.herokuapp.com/users/user",t).then((function(e){console.log(e.data),n(C),O("/login")})).catch((function(e){console.log(e.response)}))},children:[Object(h.jsxs)("div",{children:[Object(h.jsxs)("label",{className:"form-row",children:[Object(h.jsx)("input",{type:"text",onChange:v,placeholder:"First Name",name:"fname",value:c.fname}),i.fname]}),Object(h.jsx)("label",{className:"form-row",children:Object(h.jsx)("input",{type:"text",onChange:v,placeholder:"Last Name",name:"lname",value:c.lname})}),Object(h.jsxs)("label",{className:"form-row",children:[Object(h.jsx)("input",{type:"text",onChange:v,placeholder:"Username",name:"username",value:c.username}),i.username]}),Object(h.jsx)("label",{className:"form-row",children:Object(h.jsx)("input",{type:"email",onChange:v,placeholder:"E-mail",name:"email",value:c.email})}),Object(h.jsxs)("label",{className:"form-row",children:[Object(h.jsx)("input",{type:"password",onChange:v,placeholder:"Password",name:"password",value:c.password}),i.password]}),Object(h.jsxs)("label",{className:"form-row",children:[Object(h.jsx)("p",{children:"Account Role "}),Object(h.jsxs)("select",{name:"userrole",value:c.userrole,onChange:v,children:[Object(h.jsx)("option",{value:"none",children:"----Select----"}),Object(h.jsx)("option",{value:1,children:"OWNER"}),Object(h.jsx)("option",{value:2,children:"RENTER"})]}),i.userrole.type]})]}),Object(h.jsx)("div",{}),Object(h.jsx)("div",{className:"form-button",children:Object(h.jsx)("button",{disabled:m,children:"Sign Up"})})]})})}var q=function(e){var t=Object(a.useContext)(j).removeItem;return Object(h.jsxs)("div",{className:"shopping-cart_item",children:[Object(h.jsx)("img",{src:e.image,alt:"".concat(e.title," book")}),Object(h.jsxs)("div",{children:[Object(h.jsx)("h1",{children:e.title}),Object(h.jsxs)("p",{children:["$ ",e.price]}),Object(h.jsx)("button",{onClick:function(c){return t(e)},children:" Remove from cart"})]}),Object(h.jsx)("div",{children:Object(h.jsx)("pre",{children:e.descripton})})]})},R=function(e){var t=Object(a.useContext)(j).cart;return Object(h.jsxs)("div",{className:"shopping-cart",children:[t.map((function(e){return Object(h.jsx)(q,Object(b.a)({},e),e.id)})),Object(h.jsxs)("div",{className:"shopping-cart__checkout",children:[Object(h.jsxs)("p",{children:["Total: $",t.reduce((function(t,c){return e.state?(t+c.price)*e.state:t+c.price}),0).toFixed(2)]}),Object(h.jsx)("button",{onClick:function(e){window.location.href="/cart/success"},children:"Checkout"})]})]})},A=function(e){var t=Object(a.useContext)(u).addItem;return Object(h.jsxs)("div",{className:"product",children:[Object(h.jsx)("img",{src:e.product.image,alt:"".concat(e.product.title," book")}),Object(h.jsxs)("form",{onSubmit:function(c){c.preventDefault(),t(Object(b.a)(Object(b.a)({},e.product),{},{id:Date.now()}))},children:[Object(h.jsx)("h1",{className:"title",children:e.product.title}),Object(h.jsxs)("p",{className:"price",children:["$",e.product.price]}),Object(h.jsx)("button",{type:"submit",children:"Rent Item"})]})]})},D=function(){var e=Object(a.useContext)(u).products;return Object(h.jsx)("div",{className:"products-container",children:e.map((function(e){return Object(h.jsx)(A,{product:e},e.id)}))})},E=function(){var e=localStorage.getItem("name"),t=new Date,c=0===t.getHours()?12:t.getHours()%12,a=t.getHours()<12?"AM":"PM",n=t.getMinutes()%60<10?"0":"",s=t.getHours()>=18?"Good evening, ":t.getHours()>=12?"Good afternoon, ":"Good morning, ";return Object(h.jsx)("div",{children:Object(h.jsxs)("h2",{children:[" ".concat(c,":").concat(n).concat(t.getMinutes()%60).concat(a," | ").concat(s),e,"!"]})})},T=function(e){var t=Object(a.useContext)(u),c=t.products,n=t.addItem;return Object(h.jsxs)("div",{children:[Object(h.jsx)("div",{className:"table-title",children:Object(h.jsxs)("div",{className:"row",children:[Object(h.jsx)("div",{className:"col-sm-6",children:Object(h.jsx)(E,{})}),Object(h.jsxs)("div",{children:[Object(h.jsxs)(i.b,{to:"/sellers/add",className:"btn",children:[Object(h.jsx)("i",{className:"material-icons",children:"\ue147"})," ",Object(h.jsx)("span",{children:"Add New Product"})]}),Object(h.jsx)(i.b,{to:"/sellers",className:"btn",children:"View Added Products"})]})]})}),Object(h.jsx)(D,{products:c,addItem:n})]})},M=function(e,t){var c=Object(a.useState)((function(){return localStorage.getItem(e)?JSON.parse(localStorage.getItem(e)):(localStorage.setItem(e,JSON.stringify(t)),t)})),n=Object(d.a)(c,2),s=n[0],r=n[1];return[s,function(t){r(t),localStorage.setItem(e,JSON.stringify(t))}]},U=function(e){var t=M("items",e),c=Object(d.a)(t,2);return[c[0],c[1]]},_=g.b().shape({title:g.d().required("You must enter a title for the item").min(4,"The item name must be at least 4 characters long"),image:g.d().required("You must enter a brand name for the item"),description:g.d().required("You must enter a description for the item").min(10,"The description must be at least 10 characters long"),price:g.a().required("You must enter a suggested rental price").min(1)}),L=function(){var e=window.localStorage.getItem("token");return w.a.create({headers:{Authorization:"Bearer ".concat(e)},baseURL:"https://usemytechstuff-tt26.herokuapp.com"})},B={id:Date.now(),title:"",price:"",image:"https://image.freepik.com/free-vector/coming-soon-message-illuminated-with-light-projector_1284-3622.jpg",description:""},H={title:"",price:"",image:"https://image.freepik.com/free-vector/coming-soon-message-illuminated-with-light-projector_1284-3622.jpg",description:""};function J(e){var t=Object(a.useState)(B),c=Object(d.a)(t,2),n=c[0],s=c[1],r=Object(a.useState)(H),i=Object(d.a)(r,2),l=i[0],j=i[1],m=Object(a.useState)(true),p=Object(d.a)(m,2),O=p[0],f=p[1],v=Object(a.useState)([]),w=Object(d.a)(v,2),N=w[0],S=w[1],k=Object(a.useContext)(u).setProducts,I=Object(o.g)().push;console.log(N);var C=function(){!function(e){L().post("http://localhost:5000/api/products",e).then((function(e){console.log(e.data),k(e.data,{id:Date.now()}),S(e.data,{id:Date.now()}),I("/sellers")})).catch((function(e){console.log(e)})).finally(s(B))}({title:n.title.trim(),price:n.price.trim(),image:n.image.trim(),description:n.description.trim()})};Object(a.useEffect)((function(){_.isValid(n).then((function(e){f(!e)}))}),[n]);var y=function(e){var t=e.target,c=t.name,a=t.value,r=t.type,o=t.checked;!function(e,t){g.c(_,e).validate(t).then((function(){j(Object(b.a)(Object(b.a)({},l),{},Object(x.a)({},e,"")))})).catch((function(t){j(Object(b.a)(Object(b.a)({},l),{},Object(x.a)({},e,t.errors[0])))})),s(Object(b.a)(Object(b.a)({},n),{},Object(x.a)({},e,t)))}(c,"checkbox"===r?o:a)};return Object(h.jsx)("div",{children:Object(h.jsxs)("div",{className:"home-wrapper",children:[Object(h.jsx)("nav",{className:"nav",children:Object(h.jsx)("h2",{children:"Add a New Item"})}),Object(h.jsx)("div",{className:"item-wrapper",children:Object(h.jsxs)("form",{classame:"form",onSubmit:function(e){e.preventDefault(),C()},children:[Object(h.jsxs)("div",{className:"form-group",children:[Object(h.jsxs)("label",{className:"form-row",children:["Title:",Object(h.jsx)("input",{value:n.name,onChange:y,name:"title",type:"text"})]}),Object(h.jsxs)("label",{className:"form-row",children:["Price:",Object(h.jsx)("input",{value:n.brand,onChange:y,name:"price",type:"text"})]}),Object(h.jsxs)("label",{className:"form-row",children:["Image URL:",Object(h.jsx)("input",{value:n.model,onChange:y,name:"image",type:"text"})]}),Object(h.jsxs)("label",{className:"form-row",children:["Description:",Object(h.jsx)("input",{value:n.model_no,onChange:y,name:"description",type:"text"})]}),Object(h.jsx)("section",{className:"form-submit",children:Object(h.jsxs)("section",{className:"errors-section",children:[Object(h.jsx)("p",{children:l.name}),Object(h.jsx)("p",{children:l.category}),Object(h.jsx)("p",{children:l.brand}),Object(h.jsx)("p",{children:l.model}),Object(h.jsx)("p",{children:l.description}),Object(h.jsx)("p",{children:l.min_rent}),Object(h.jsx)("p",{children:l.max_rent}),Object(h.jsx)("p",{children:l.price})]})})]}),Object(h.jsxs)("div",{className:"buttons",children:[Object(h.jsx)("div",{className:"form-button",children:Object(h.jsx)("button",{disabled:O,id:"submitBtn",children:"Add Item"})}),Object(h.jsx)("div",{className:"form-button",children:Object(h.jsx)("button",{onClick:function(e){I("/sellers")},id:"cancelBtn",children:"Cancel"})})]})]})})]})})}var $=c(82),F=c.n($),V=function(){return Object(h.jsx)(F.a,{width:undefined,height:"1000px"})},z=function(){return Object(h.jsxs)("div",{className:"success-page",children:[Object(h.jsx)(V,{}),Object(h.jsxs)("div",{className:"success",children:[Object(h.jsx)("h1",{children:"Thanks for Renting"}),Object(h.jsx)("button",{onClick:function(){window.localStorage.removeItem("items"),window.location.href="/sellers"},children:"Shop Again"})]})]})},Y=[{id:1,title:"Cannon x500",price:25.99,image:"https://theangelconsultant.com/buildweek/camera.jpg",descripton:"Please add description to data object"},{id:2,title:"Sony 3000",price:35.99,image:"https://theangelconsultant.com/buildweek/laptop2.jpg",descripton:"Please add description to data object"},{id:3,title:"Macbook Pro",price:60.99,image:"https://theangelconsultant.com/buildweek/laptop.jpg",descripton:"Please add description to data object"},{id:4,title:"Production Microphone",price:40,image:"https://theangelconsultant.com/buildweek/microphone2.jpg",descripton:"Please add description to data object"},{id:5,title:"Ikon PHT",price:99,image:"https://theangelconsultant.com/buildweek/video-camera.jpg",descripton:"Please add description to data object"},{id:6,title:"Commercial Video Camera",price:150,image:"https://theangelconsultant.com/buildweek/video-camera2.jpg",descripton:"Please add description to data object"},{id:7,title:"DJ Turntable",price:300,image:"https://theangelconsultant.com/buildweek/turntable.jpg",descripton:"Please add description to data object"},{id:8,title:"Drone Spy",price:215,image:"https://theangelconsultant.com/buildweek/drone.jpg",descripton:"Please add description to data object"}];var G=function(){var e=Object(a.useState)(Y),t=Object(d.a)(e,2),c=t[0],n=t[1],s=U([]),r=Object(d.a)(s,2),i=r[0],b=r[1],m=Object(a.useState)(!1),x=Object(d.a)(m,2)[1];return console.log(i),console.log(c),Object(h.jsx)("div",{className:"App",children:Object(h.jsx)(u.Provider,{value:{products:c,setProducts:n,addItem:function(e){b([].concat(Object(l.a)(i),[e]))},setIsLoggedIn:x},children:Object(h.jsxs)(j.Provider,{value:{cart:i,removeItem:function(e){b(i.filter((function(t){return e.id!==t.id})))}},children:[Object(h.jsx)(O,{logout:function(){localStorage.removeItem("token"),window.location.href="/login",x(!1)}}),Object(h.jsxs)(o.d,{children:[Object(h.jsx)(o.b,{exact:!0,path:"/",children:Object(h.jsx)(o.a,{to:"/login"})}),Object(h.jsx)(o.b,{path:"/login",component:k}),Object(h.jsx)(o.b,{path:"/signup",component:P}),Object(h.jsx)(p,{exact:!0,path:"/cart",children:Object(h.jsx)(R,{})}),Object(h.jsx)(p,{exact:!0,path:"/sellers",children:Object(h.jsx)(T,{})}),Object(h.jsx)(p,{path:"/sellers/add",children:Object(h.jsx)(J,{})}),Object(h.jsx)(p,{path:"/cart/success",component:z})]})]})})})},W=Object(o.h)(G);r.a.render(Object(h.jsx)(i.a,{children:Object(h.jsx)(W,{})}),document.getElementById("root"))},88:function(e,t,c){}},[[213,1,2]]]);
//# sourceMappingURL=main.6f50dbed.chunk.js.map