{"ast":null,"code":"import _defineProperty from\"C:/Users/Admin2/OneDrive/Lambda School/Web_3.3/BuildWeek2-ContextAPI/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"C:/Users/Admin2/OneDrive/Lambda School/Web_3.3/BuildWeek2-ContextAPI/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"C:/Users/Admin2/OneDrive/Lambda School/Web_3.3/BuildWeek2-ContextAPI/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import axiosWithAuth from'../utils/axiosWithAuth';import*as yup from'yup';import{signUpFormSchema}from'../utils/signUpFormSchema';import{useHistory}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var initialFormValues={first_name:'',last_name:'',role:'',email:'',password:''};var initialFormErrors={first_name:'',last_name:'',role:'',email:'',password:''};export default function SignUpForm(){var _useState=useState(initialFormValues),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];var _useState3=useState(initialFormValues),_useState4=_slicedToArray(_useState3,2),formValues=_useState4[0],setFormValues=_useState4[1];var _useState5=useState(initialFormErrors),_useState6=_slicedToArray(_useState5,2),formErrors=_useState6[0],setFormErrors=_useState6[1];var _useHistory=useHistory(),push=_useHistory.push;var onChange=function onChange(evt){var _evt$target=evt.target,name=_evt$target.name,value=_evt$target.value;console.log(evt.target.name,evt.target.value);yup.reach(signUpFormSchema,name).validate(value).then(function(){setFormErrors(_objectSpread(_objectSpread({},formErrors),{},_defineProperty({},name,\"\")));}).catch(function(err){setFormErrors(_objectSpread(_objectSpread({},formErrors),{},_defineProperty({},name,err.errors[0])));});setFormValues(_objectSpread(_objectSpread({},formValues),{},_defineProperty({},name,//Check for checkboxes\nevt.target.type==='checkbox'?evt.target.checked:value)));};var signUpUser=function signUpUser(newUser){axiosWithAuth().post('https://reqres.in/api/users',newUser).then(function(res){console.log(res.data);setUser(res.data);setFormValues(initialFormValues);push('/login');}).catch(function(err){console.log(err.response);});};var onSubmit=function onSubmit(evt){evt.preventDefault();var newUser={first_name:formValues.first_name.trim(),last_name:formValues.last_name.trim(),role:formValues.role,email:formValues.email.trim(),password:formValues.password.trim()};signUpUser(newUser);// // call to API\n// console.log(newUser)\n};console.log(user);return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"form\",{className:\"form container\",onSubmit:onSubmit,children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"label\",{children:[\"First Name:\",/*#__PURE__*/_jsx(\"input\",{value:formValues.first_name,onChange:onChange,name:\"first_name\",type:\"text\"}),formErrors.first_name]})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"label\",{children:[\"Last Name:\",/*#__PURE__*/_jsx(\"input\",{value:formValues.last_name,onChange:onChange,name:\"last_name\",type:\"text\"}),formErrors.last_name]})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"label\",{children:[\"Role\",/*#__PURE__*/_jsxs(\"select\",{onChange:onChange,value:formValues.role,name:\"role\",children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"-- Select an Option --\"}),/*#__PURE__*/_jsx(\"option\",{value:\"owner\",children:\"Owner\"}),/*#__PURE__*/_jsx(\"option\",{value:\"renter\",children:\"Renter\"})]})]})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"label\",{children:[\"Email:\",/*#__PURE__*/_jsx(\"input\",{value:formValues.email,onChange:onChange,name:\"email\",type:\"text\"}),formErrors.email]})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"label\",{children:[\"Password:\",/*#__PURE__*/_jsx(\"input\",{value:formValues.password,onChange:onChange,name:\"password\",type:\"password\"}),formErrors.password]})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{id:\"submitBtn\",children:\"Sign Up\"})})]})});}","map":{"version":3,"sources":["C:/Users/Admin2/OneDrive/Lambda School/Web_3.3/BuildWeek2-ContextAPI/client/src/components/SignUpForm.js"],"names":["React","useState","axiosWithAuth","yup","signUpFormSchema","useHistory","initialFormValues","first_name","last_name","role","email","password","initialFormErrors","SignUpForm","user","setUser","formValues","setFormValues","formErrors","setFormErrors","push","onChange","evt","target","name","value","console","log","reach","validate","then","catch","err","errors","type","checked","signUpUser","newUser","post","res","data","response","onSubmit","preventDefault","trim"],"mappings":"ukBAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CACA,MAAOC,CAAAA,aAAP,KAA0B,wBAA1B,CACA,MAAO,GAAKC,CAAAA,GAAZ,KAAqB,KAArB,CACA,OAASC,gBAAT,KAAiC,2BAAjC,CACA,OAASC,UAAT,KAA2B,kBAA3B,C,wFAEA,GAAMC,CAAAA,iBAAiB,CAAG,CACxBC,UAAU,CAAE,EADY,CAExBC,SAAS,CAAE,EAFa,CAGxBC,IAAI,CAAE,EAHkB,CAIxBC,KAAK,CAAE,EAJiB,CAKxBC,QAAQ,CAAE,EALc,CAA1B,CAQA,GAAMC,CAAAA,iBAAiB,CAAG,CACxBL,UAAU,CAAE,EADY,CAExBC,SAAS,CAAE,EAFa,CAGxBC,IAAI,CAAE,EAHkB,CAIxBC,KAAK,CAAE,EAJiB,CAKxBC,QAAQ,CAAE,EALc,CAA1B,CAQA,cAAe,SAASE,CAAAA,UAAT,EAAsB,eAEXZ,QAAQ,CAACK,iBAAD,CAFG,wCAE5BQ,IAF4B,eAEtBC,OAFsB,8BAGCd,QAAQ,CAACK,iBAAD,CAHT,yCAG5BU,UAH4B,eAGhBC,aAHgB,8BAIChB,QAAQ,CAACW,iBAAD,CAJT,yCAI5BM,UAJ4B,eAIhBC,aAJgB,+BAKlBd,UAAU,EALQ,CAK3Be,IAL2B,aAK3BA,IAL2B,CAQnC,GAAMC,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,CAACC,GAAD,CAAS,iBACAA,GAAG,CAACC,MADJ,CAChBC,IADgB,aAChBA,IADgB,CACVC,KADU,aACVA,KADU,CAExBC,OAAO,CAACC,GAAR,CAAYL,GAAG,CAACC,MAAJ,CAAWC,IAAvB,CAA6BF,GAAG,CAACC,MAAJ,CAAWE,KAAxC,EAEAtB,GAAG,CACAyB,KADH,CACSxB,gBADT,CAC2BoB,IAD3B,EAEGK,QAFH,CAEYJ,KAFZ,EAGGK,IAHH,CAGQ,UAAM,CACVX,aAAa,gCACRD,UADQ,wBAEVM,IAFU,CAEH,EAFG,GAAb,CAID,CARH,EASGO,KATH,CASS,SAACC,GAAD,CAAS,CACdb,aAAa,gCACRD,UADQ,wBAEVM,IAFU,CAEHQ,GAAG,CAACC,MAAJ,CAAW,CAAX,CAFG,GAAb,CAID,CAdH,EAgBAhB,aAAa,gCACRD,UADQ,wBAEVQ,IAFU,CAGT;AACAF,GAAG,CAACC,MAAJ,CAAWW,IAAX,GAAoB,UAApB,CAAiCZ,GAAG,CAACC,MAAJ,CAAWY,OAA5C,CACEV,KALO,GAAb,CAOD,CA3BD,CA6BA,GAAMW,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,CAACC,OAAD,CAAa,CAC9BnC,aAAa,GACVoC,IADH,CACQ,6BADR,CACuCD,OADvC,EAEGP,IAFH,CAEQ,SAAAS,GAAG,CAAI,CACXb,OAAO,CAACC,GAAR,CAAYY,GAAG,CAACC,IAAhB,EACAzB,OAAO,CAACwB,GAAG,CAACC,IAAL,CAAP,CACAvB,aAAa,CAACX,iBAAD,CAAb,CACAc,IAAI,CAAC,QAAD,CAAJ,CACD,CAPH,EAQGW,KARH,CAQS,SAAAC,GAAG,CAAI,CACZN,OAAO,CAACC,GAAR,CAAYK,GAAG,CAACS,QAAhB,EACD,CAVH,EAWC,CAZH,CAaA,GAAMC,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,CAACpB,GAAD,CAAS,CACxBA,GAAG,CAACqB,cAAJ,GAEA,GAAMN,CAAAA,OAAO,CAAG,CACd9B,UAAU,CAAES,UAAU,CAACT,UAAX,CAAsBqC,IAAtB,EADE,CAEdpC,SAAS,CAAEQ,UAAU,CAACR,SAAX,CAAqBoC,IAArB,EAFG,CAGdnC,IAAI,CAAEO,UAAU,CAACP,IAHH,CAIdC,KAAK,CAAEM,UAAU,CAACN,KAAX,CAAiBkC,IAAjB,EAJO,CAKdjC,QAAQ,CAAEK,UAAU,CAACL,QAAX,CAAoBiC,IAApB,EALI,CAAhB,CAQAR,UAAU,CAACC,OAAD,CAAV,CACA;AAEA;AACD,CAfD,CAgBAX,OAAO,CAACC,GAAR,CAAYb,IAAZ,EACA,mBACE,kCACE,cAAM,SAAS,CAAC,gBAAhB,CAAiC,QAAQ,CAAE4B,QAA3C,wBACA,kCACI,oDAEE,cACE,KAAK,CAAE1B,UAAU,CAACT,UADpB,CAEE,QAAQ,CAAEc,QAFZ,CAGE,IAAI,CAAC,YAHP,CAIE,IAAI,CAAC,MAJP,EAFF,CAQGH,UAAU,CAACX,UARd,GADJ,EADA,cAaE,kCACE,mDAEE,cACE,KAAK,CAAES,UAAU,CAACR,SADpB,CAEE,QAAQ,CAAEa,QAFZ,CAGE,IAAI,CAAC,WAHP,CAIE,IAAI,CAAC,MAJP,EAFF,CAQGH,UAAU,CAACV,SARd,GADF,EAbF,cAyBE,kCACE,6CAEE,gBAAQ,QAAQ,CAAEa,QAAlB,CAA4B,KAAK,CAAEL,UAAU,CAACP,IAA9C,CAAoD,IAAI,CAAC,MAAzD,wBACE,eAAQ,KAAK,CAAC,EAAd,oCADF,cAEE,eAAQ,KAAK,CAAC,OAAd,mBAFF,cAGE,eAAQ,KAAK,CAAC,QAAd,oBAHF,GAFF,GADF,EAzBF,cAmCE,kCACE,+CAEE,cACE,KAAK,CAAEO,UAAU,CAACN,KADpB,CAEE,QAAQ,CAAEW,QAFZ,CAGE,IAAI,CAAC,OAHP,CAIE,IAAI,CAAC,MAJP,EAFF,CAQGH,UAAU,CAACR,KARd,GADF,EAnCF,cA+CE,kCACE,kDAEE,cACE,KAAK,CAAEM,UAAU,CAACL,QADpB,CAEE,QAAQ,CAAEU,QAFZ,CAGE,IAAI,CAAC,UAHP,CAIE,IAAI,CAAC,UAJP,EAFF,CAQGH,UAAU,CAACP,QARd,GADF,EA/CF,cA2DE,kCACE,eAAQ,EAAE,CAAC,WAAX,qBADF,EA3DF,GADF,EADF,CAoED","sourcesContent":["import React, { useState } from 'react'\r\nimport axiosWithAuth from '../utils/axiosWithAuth';\r\nimport * as yup from 'yup'\r\nimport { signUpFormSchema } from '../utils/signUpFormSchema';\r\nimport { useHistory } from 'react-router-dom'\r\n\r\nconst initialFormValues = {\r\n  first_name: '',\r\n  last_name: '',\r\n  role: '',\r\n  email: '',\r\n  password: '',\r\n}\r\n\r\nconst initialFormErrors = {\r\n  first_name: '',\r\n  last_name: '',\r\n  role: '',\r\n  email: '',\r\n  password: '',\r\n}\r\n\r\nexport default function SignUpForm() {\r\n\r\n  const [user, setUser] = useState(initialFormValues)\r\n  const [formValues, setFormValues] = useState(initialFormValues)\r\n  const [formErrors, setFormErrors] = useState(initialFormErrors)\r\n  const { push } = useHistory();\r\n\r\n  \r\n  const onChange = (evt) => {\r\n    const { name, value } = evt.target\r\n    console.log(evt.target.name, evt.target.value)\r\n\r\n    yup\r\n      .reach(signUpFormSchema, name)\r\n      .validate(value)\r\n      .then(() => {\r\n        setFormErrors({\r\n          ...formErrors,\r\n          [name]: \"\",\r\n        });\r\n      })\r\n      .catch((err) => {\r\n        setFormErrors({\r\n          ...formErrors,\r\n          [name]: err.errors[0],\r\n        });\r\n      });\r\n\r\n    setFormValues({\r\n      ...formValues, \r\n      [name]:\r\n        //Check for checkboxes\r\n        evt.target.type === 'checkbox' ? evt.target.checked :\r\n          value,\r\n    })\r\n  }\r\n\r\n  const signUpUser = (newUser) => {\r\n    axiosWithAuth()\r\n      .post('https://reqres.in/api/users', newUser)\r\n      .then(res => {\r\n        console.log(res.data)\r\n        setUser(res.data)\r\n        setFormValues(initialFormValues)\r\n        push('/login')\r\n      })\r\n      .catch(err => {\r\n        console.log(err.response)\r\n      })\r\n    }\r\n  const onSubmit = (evt) => {\r\n    evt.preventDefault();\r\n    \r\n    const newUser = {\r\n      first_name: formValues.first_name.trim(),\r\n      last_name: formValues.last_name.trim(),\r\n      role: formValues.role,\r\n      email: formValues.email.trim(),\r\n      password: formValues.password.trim(),\r\n    }\r\n    \r\n    signUpUser(newUser)\r\n    // // call to API\r\n\r\n    // console.log(newUser)\r\n  }\r\n  console.log(user)\r\n  return (\r\n    <div>\r\n      <form className=\"form container\" onSubmit={onSubmit}>\r\n      <div>\r\n          <label>\r\n            First Name:\r\n            <input\r\n              value={formValues.first_name}\r\n              onChange={onChange}\r\n              name=\"first_name\"\r\n              type=\"text\"\r\n            />\r\n            {formErrors.first_name}\r\n          </label>\r\n        </div>\r\n        <div>\r\n          <label>\r\n            Last Name:\r\n            <input\r\n              value={formValues.last_name}\r\n              onChange={onChange}\r\n              name=\"last_name\"\r\n              type=\"text\"\r\n            />\r\n            {formErrors.last_name}\r\n          </label>\r\n        </div>\r\n        <div>\r\n          <label>\r\n            Role\r\n            <select onChange={onChange} value={formValues.role} name=\"role\">\r\n              <option value=\"\">-- Select an Option --</option>\r\n              <option value=\"owner\">Owner</option>\r\n              <option value=\"renter\">Renter</option>\r\n            </select>\r\n          </label>\r\n        </div>\r\n        <div>\r\n          <label>\r\n            Email:\r\n            <input\r\n              value={formValues.email}\r\n              onChange={onChange}\r\n              name=\"email\"\r\n              type=\"text\"\r\n            />\r\n            {formErrors.email}\r\n          </label>\r\n        </div>\r\n        <div>\r\n          <label>\r\n            Password:\r\n            <input\r\n              value={formValues.password}\r\n              onChange={onChange}\r\n              name=\"password\"\r\n              type=\"password\"\r\n            />\r\n            {formErrors.password}\r\n          </label>\r\n        </div>\r\n        <div>\r\n          <button id=\"submitBtn\">Sign Up</button>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  )\r\n\r\n}"]},"metadata":{},"sourceType":"module"}